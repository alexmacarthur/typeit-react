// TypeIt - React by Alex MacArthur - https://typeitjs.com
function e(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach(function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}}),t.default=e,t}var t=e(require("react"));function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}const r=[null,null,{}];var o=(e,t)=>Object.assign({},e,t),i=e=>Array.from(e),s=e=>(new DOMParser).parseFromString(e,"text/html").body;const u=(e,t=null,n=!1)=>{let r=i(e.childNodes).flatMap(e=>{return 3===(t=e).nodeType||"BR"===t.tagName?e:u(e);var t});return t&&(r=r.filter(e=>!t.contains(e))),n?r.reverse():r},c=(e,t=null)=>({node:t,content:e});function l(e){let t=s(e);return u(t).flatMap(e=>e.nodeValue?i(e.nodeValue).map(t=>c(t,e)):c(e))}function a(e,t=!0){return t?l(e):i(e).map(e=>c(e))}var f=e=>document.createElement(e),h=e=>document.createTextNode(e),d=(e,t="")=>{let n=f("style");n.id=t,n.appendChild(h(e)),document.head.appendChild(n)},m=e=>Array.isArray(e);const v=e=>Number.isInteger(e),p=(e,t=document,n=!1)=>t["querySelector"+(n?"All":"")](e),y={started:!1,completed:!1,frozen:!1,destroyed:!1},g={breakLines:!0,cursor:!0,cursorChar:"|",cursorSpeed:1e3,deleteSpeed:null,html:!0,lifeLike:!0,loop:!1,loopDelay:750,nextStringDelay:750,speed:100,startDelay:250,startDelete:!1,strings:[],waitUntilVisible:!1,beforeString:()=>{},afterString:()=>{},beforeStep:()=>{},afterStep:()=>{},afterComplete:()=>{}},P=(e,t,n="START")=>{let r=new RegExp("END","i").test(n),o=p(".ti-cursor",t),i=e?p(e,t):t,s=u(i,o,!0),c=s[0],l=s[s.length-1],a=r&&!e?0:u(t,o,!0).findIndex(e=>e.isSameNode(r?c:l));return r&&a--,a+1};var b=e=>(m(e)||(e=[e/2,e/2]),e),S=(e,t)=>Math.abs(Math.random()*(e+t-(e-t))+(e-t));let w=e=>e/2;var N=e=>"value"in e;const j=e=>"function"==typeof e?e():e;var M=e=>"BODY"===e.tagName;const E=(e,t)=>{let n=i(p("*",t,!0));return[t].concat(n.reverse()).find(t=>t.cloneNode().isEqualNode(e.cloneNode()))},T=(e,t,n,r)=>{let o=t.content instanceof HTMLElement,i=t.node,s=null==i?void 0:i.parentNode,c=o?t.content:h(t.content);if(N(e))return void(e.value=""+e.value+t.content);if(!o&&s&&!M(s)){let r=E(s,e);if(r&&((e,t)=>{let n=e.nextSibling;return!n||n.isEqualNode(t)})(r,n))e=r;else{c=s.cloneNode(),c.appendChild(h(t.content));let n=s.parentNode,r=n.cloneNode();if(!M(n)){let t=E(r,e);for(;!t&&!M(n);){let o=r;o.innerHTML=c.outerHTML,c=o,n=n.parentNode,r=n.cloneNode(),t=E(r,e)}e=t||e}}}let l=u(e,n,!0)[r-1],a=l?l.parentNode:e;a.insertBefore(c,a.contains(n)?n:null)};var x=e=>e&&e.remove();const L=["font-family","font-weight","font-size","font-style","line-height","color"];function k(e,t,n){if(!e.s){if(n instanceof D){if(!n.s)return void(n.o=k.bind(null,e,t));1&t&&(t=n.s),n=n.v}if(n&&n.then)return void n.then(k.bind(null,e,t),k.bind(null,e,2));e.s=t,e.v=n;const r=e.o;r&&r(e)}}const D=function(){function e(){}return e.prototype.then=function(t,n){const r=new e,o=this.s;if(o){const e=1&o?t:n;if(e){try{k(r,1,e(this.v))}catch(e){k(r,2,e)}return r}return this}return this.o=function(e){try{const o=e.v;1&e.s?k(r,1,t?t(o):o):n?k(r,1,n(o)):k(r,2,o)}catch(e){k(r,2,e)}},r},e}();function O(e){return e instanceof D&&1&e.s}function C(e,t,n){var r,o,i=-1;return function s(u){try{for(;++i<e.length&&(!n||!n());)if((u=t(i))&&u.then){if(!O(u))return void u.then(s,o||(o=k.bind(null,r=new D,2)));u=u.v}r?k(r,1,u):r=u}catch(e){k(r||(r=new D),2,e)}}(),r}function I(e,t,n){for(var r;;){var o=e();if(O(o)&&(o=o.v),!o)return i;if(o.then){r=0;break}var i=n();if(i&&i.then){if(!O(i)){r=1;break}i=i.s}if(t){var s=t();if(s&&s.then&&!O(s)){r=2;break}}}var u=new D,c=k.bind(null,u,2);return(0===r?o.then(a):1===r?i.then(l):s.then(f)).then(void 0,c),u;function l(r){i=r;do{if(t&&(s=t())&&s.then&&!O(s))return void s.then(f).then(void 0,c);if(!(o=e())||O(o)&&!o.v)return void k(u,1,i);if(o.then)return void o.then(a).then(void 0,c);O(i=n())&&(i=i.v)}while(!i||!i.then);i.then(l).then(void 0,c)}function a(e){e?(i=n())&&i.then?i.then(l).then(void 0,c):l(i):k(u,1,i)}function f(){(o=e())?o.then?o.then(a).then(void 0,c):a(o):k(u,1,i)}}function A(e,t={}){const n=this,h=function(e,t){try{return Promise.resolve(function(e,t,n){try{return Promise.resolve(new Promise(r=>{n.push(setTimeout(function(){try{return Promise.resolve(e()).then(function(){r()})}catch(e){return Promise.reject(e)}},t))}))}catch(e){return Promise.reject(e)}}(e,t,G))}catch(e){return Promise.reject(e)}},M=()=>N(Q),E=e=>function(e){let{speed:t,deleteSpeed:n,lifeLike:r}=e;return n=null!==n?n:t/3,r?[S(t,w(t)),S(n,w(n))]:[t,n]}(X)[e],k=(e,t=0)=>e?E(t):0,D=(e,t)=>($.add(e),((e={})=>{let t=e.delay;t&&$.add([[z,t]])})(t),this),O=()=>(e=>N(e)?i(e.value):u(e,p(".ti-cursor",e),!0))(Q),A=(e={})=>[[F,e],[F,X]],B=e=>{let t=X.nextStringDelay;$.add([[z,t[0]],...e,[z,t[1]]])},H=e=>{ee&&(te.classList.toggle("disabled",e),te.classList.toggle("with-delay",!e))},R=function(){try{let e;W.started=!0;let t,r=$.getItems();const o=function(o,i){try{var s=function(){function o(e){return W.completed=!0,Promise.resolve(X.afterComplete(...t)).then(function(){if(!X.loop)throw"";let e=X.loopDelay;h(function(){try{return Promise.resolve(function(e){try{function t(t){return $.reset(),$.set(0,[z,e,{}]),Promise.resolve(_({num:null})).then(function(){})}return Promise.resolve(J?Promise.resolve(q({value:J})).then(t):t())}catch(e){return Promise.reject(e)}}(e[0])).then(function(){R()})}catch(e){return Promise.reject(e)}},e[1])})}const i=C(r,function(e){if(W.frozen||W.destroyed)throw"";let o=r[e],i=o[2];return t=[o,n],i.freezeCursor&&H(!0),Promise.resolve(X.beforeStep(...t)).then(function(){return Promise.resolve(o[0].call(n,o[1],i)).then(function(){return Promise.resolve(X.afterStep(...t)).then(function(){$.setMeta(e,{executed:!0}),H(!1)})})})},function(){return e});return i&&i.then?i.then(o):o()}()}catch(e){return}return s&&s.then?s.then(void 0,function(){}):s}();return Promise.resolve(o&&o.then?o.then(function(t){return e?t:n}):e?o:n)}catch(e){return Promise.reject(e)}},z=(e=0)=>h(()=>{},e),q=function({value:e,to:t="START",instant:n=!1}){try{let r=(({el:e,move:t,cursorPos:n,to:r})=>v(t)?-1*t:P(t,e,r)-n)({el:Q,move:e,cursorPos:J,to:t}),o=()=>{J+=r<0?-1:1,((e,t,n,r)=>{let o=t[Math.min(r,t.length)-1];(e=(null==o?void 0:o.parentNode)||e).insertBefore(n,o||null)})(Q,O(),te,J)};return Promise.resolve(h(function(){try{let e=0;const t=I(function(){return e<Math.abs(r)},function(){return e++},function(){return n?void o():Promise.resolve(h(o,E(0))).then(function(e){})});return Promise.resolve(t&&t.then?t.then(function(){}):void 0)}catch(e){return Promise.reject(e)}},k(n))).then(function(){})}catch(e){return Promise.reject(e)}},V=({chars:e,instant:t,silent:n})=>h(function(){try{function r(r){function i(){return n?void 0:Promise.resolve(X.afterString(e)).then(function(e){})}const s=C(e,function(n){return t?void o(e[n]):Promise.resolve(h(()=>{o(e[n])},E(0))).then(function(e){})});return s&&s.then?s.then(i):i()}const o=e=>T(Q,e,te,J);return Promise.resolve(n?r():Promise.resolve(X.beforeString(e)).then(r))}catch(e){return Promise.reject(e)}},k(t)),F=function(e){try{return X=o(X,e),Promise.resolve()}catch(e){return Promise.reject(e)}},U=function(){try{return M()?(Q.value="",Promise.resolve()):(O().forEach(e=>{x(e)}),Promise.resolve())}catch(e){return Promise.reject(e)}},_=function({num:e=null,instant:t=!1,to:n="START"}){try{const r=e=>v(e)?e:P(e,Q,n);return Promise.resolve(h(function(){try{let n=r(e);const o=()=>{let e=O();var t;e.length&&(M()?Q.value=Q.value.slice(0,-1):(x(e[J]),t=te,p("*",Q,!0).forEach(e=>{if(!e.innerHTML&&"BR"!==e.tagName&&!e.isSameNode(t)){let t=e;for(;1===t.parentElement.childNodes.length;)t=t.parentElement;x(t)}})))};let i=0;const s=I(function(){return i<n},function(){return i++},function(){return t?void o():Promise.resolve(h(o,E(1))).then(function(e){})});return Promise.resolve(s&&s.then?s.then(function(){}):void 0)}catch(e){return Promise.reject(e)}},k(t,1))).then(function(){const t=function(){if(null===e&&O().length-1>0)return Promise.resolve(_({num:null})).then(function(){})}();if(t&&t.then)return t.then(function(){})})}catch(e){return Promise.reject(e)}};this.break=function(e){const t=c(f("BR"));return D([[V,{chars:[t],silent:!0}]],e)},this.delete=function(e=null,t={}){e=j(e);let n=A(t),r=e,{instant:o,to:i}=t;return D([n[0],[_,{num:r,instant:o,to:i},K],n[1]],t)},this.empty=function(e={}){return D([[U]],e)},this.exec=function(e,t){let n=A(t);return D([n[0],[e,null],n[1]],t)},this.move=function(e,t={}){e=j(e);let n=A(t),{instant:r,to:o}=t;return D([n[0],[q,{value:null===e?"":e,to:o,instant:r},K],n[1]],t)},this.options=function(e){return e=j(e),D([[F,e]],e)},this.pause=function(e,t={}){return D([[z,j(e)]],t)},this.type=function(e,t={}){e=j(e);let n=A(t),r=a(e,X.html),{instant:o}=t;return D([n[0],[V,{chars:r,instant:o},K],n[1]],t)},this.is=function(e){return W[e]},this.destroy=function(e=!0){G.forEach(e=>clearTimeout(e)),G=[],j(e)&&x(te),W.destroyed=!0},this.freeze=function(){W.frozen=!0},this.unfreeze=function(){W.frozen=!1,R()},this.reset=function(){!this.is("destroyed")&&this.destroy(),$.reset(),J=0;for(let e in W)W[e]=!1;return Q[M()?"value":"innerHTML"]="",this},this.go=function(){return W.started?this:(function(){try{function e(e){requestAnimationFrame(()=>{requestAnimationFrame(()=>{const e=te.getBoundingClientRect().width/2;te.style.margin="0 -"+(e+2)+"px 0 -"+(e-2)+"px"})})}if(!M()&&Q.appendChild(te),!ee)return Promise.resolve();((e,t,n)=>{let r="[data-typeit-id='"+e+"'] .ti-cursor",o=getComputedStyle(n),i=L.reduce((e,t)=>e+" "+t+": var(--ti-"+t+", "+o[t]+");","");d("@keyframes blink-"+e+" { 0% {opacity: 0} 49% {opacity: 0} 50% {opacity: 1} } "+r+" { display: inline; "+i+" animation: blink-"+e+" "+t.cursorSpeed/1e3+"s infinite; } "+r+".with-delay { animation-delay: 500ms; } "+r+".disabled { animation: none; }",e)})(Z,X,Q);const t="loaded"===document.fonts.status;Promise.resolve(t?e():Promise.resolve(document.fonts.ready).then(e))}catch(e){return Promise.reject(e)}}(),X.waitUntilVisible?(((e,t)=>{new IntersectionObserver((n,r)=>{n.forEach(n=>{n.isIntersecting&&(t(),r.unobserve(e))})},{threshold:1}).observe(e)})(Q,R.bind(this)),this):(R(),this))},this.getQueue=function(){return $},this.getOptions=function(){return X},this.getElement=function(){return Q};let Q="string"==typeof(Y=e)?p(Y):Y;var Y;let G=[],J=0,K={freezeCursor:!0},W=o({},y),X=o(g,t);X=o(X,{html:!M()&&X.html,nextStringDelay:b(X.nextStringDelay),loopDelay:b(X.loopDelay)});let Z=Math.random().toString().substring(2,9),$=function(e){const t=function(e){return n=n.concat(e.map(e=>r.map((t,n)=>e[n]?e[n]:t))),this};let n=[];return t(e),{add:t,set:function(e,t){n[e]=t},reset:function(){n=n.map(e=>(e[2].executed=!1,e))},getItems:function(){return n.filter(e=>!e[2].executed)},setMeta:function(e,t){n[e][2]=o(n[e][2],t)}}}([[z,X.startDelay]]);Q.dataset.typeitId=Z,d("[data-typeit-id]:before {content: '.'; display: inline-block; width: 0; visibility: hidden;}");let ee=X.cursor&&!M(),te=(()=>{if(M())return;let e=f("span");return e.className="ti-cursor",ee?(e.innerHTML=s(X.cursorChar).innerHTML,e):(e.style.visibility="hidden",e)})();var ne;X.strings=(e=>{let t=Q.innerHTML;return t?(Q.innerHTML="",X.startDelete?(l(t).forEach(e=>{T(Q,e,te,J)}),B([[_,{num:null}]]),e):t.trim().split(/<br(?:\s*?)(?:\/)?>/).concat(e)):e})(m(ne=X.strings)?ne:[ne]),X.strings.length&&(()=>{let e=X.strings.filter(e=>!!e);e.forEach((t,n)=>{let r=a(t,X.html);if($.add([[V,{chars:r},K]]),n+1===e.length)return;const o=X.breakLines?[[V,{chars:[c(f("BR"))]},K]]:[[_,{num:r.length},K]];B(o)})})()}var B=["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr"],H=["options","as","children","getBeforeInit","getAfterInit"],R=t.useRef,z=t.useEffect,q=t.useState,V=t.useMemo,F=function(e){var r=q(!0),o=r[0],i=r[1],s=R(null),u=e.options,c=e.as,l=e.children,a=e.getBeforeInit,f=e.getAfterInit,h=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)t.indexOf(n=i[r])>=0||(o[n]=e[n]);return o}(e,H),d=c,m=V(function(){return B.indexOf(d.toLowerCase())>-1},[d]);return z(function(){l&&(u.strings=s.current.innerHTML),i(!1)},[]),z(function(){if(!o){var e=new A(s.current,n({},u));return(e=a(e)).go(),e=f(e),function(){e.destroy()}}},[o]),t.createElement("div",{style:{opacity:o?0:1}},m?t.createElement(d,n({ref:s},h)):t.createElement(d,n({ref:s},h),o&&l))};F.defaultProps={as:"span",options:{},getBeforeInit:function(e){return e},getAfterInit:function(e){return e}},module.exports=F;
